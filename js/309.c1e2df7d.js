(window.webpackJsonp=window.webpackJsonp||[]).push([[309],{937:function(n,e){n.exports="\x3c!--\ntitle: 41-ç”µå­é‚®ä»¶\nsort:\n--\x3e\n\n# ç”µå­é‚®ä»¶\n\n## yagmail\n\n> ä¸è¦å¦„æƒ³ç”¨å†…ç½®åº“,å¿«ä½¿ç”¨ yagmail å§ ğŸ¤£\n\n```python\nimport yagmail\n\n#é“¾æ¥é‚®ç®±æœåŠ¡å™¨\nyag = yagmail.SMTP( user=\"user@126.com\", password=\"1234\", host='smtp.126.com')\n\n# é‚®ç®±æ­£æ–‡\ncontents = ['This is the body, and here is just text http://somedomain/image.png',\n            'You can find an audio file attached.', '/local/path/song.mp3']\n\n# å‘é€é‚®ä»¶\nyag.send('taaa@126.com', 'subject', contents)\n# å…³é—­\nyag.close()\n```\n\n### é™„åŠ \n\n```python\n# å¤šä¸ªç”¨æˆ·å‘é‚®ä»¶\nyag.send(['aa@126.com','bb@qq.com','cc@gmail.com'], 'subject', contents)\n# å¸¦é™„ä»¶\nyag.send('aaaa@126.com', 'å‘é€é™„ä»¶', contents, [\"d://log.txt\",\"d://baidu_img.jpg\"])\n```\n\n### SMTP å‘é€é‚®ä»¶\n\nğŸš¦ è¸©äº†å¥½å¤šå‘ï¼Œåœ¨ä¹Ÿä¸æƒ³ç”¨å†…ç½®åº“å‘é‚®ä»¶äº†\n\n> SMTP æ˜¯å‘é€é‚®ä»¶çš„åè®®ï¼ŒPython å†…ç½®å¯¹ SMTP çš„æ”¯æŒï¼Œå¯ä»¥å‘é€çº¯æ–‡æœ¬é‚®ä»¶ã€HTML é‚®ä»¶ä»¥åŠå¸¦é™„ä»¶çš„é‚®ä»¶ã€‚\n\n```python\nfrom email.mime.text import MIMEText\n\nimport smtplib\n\nuser_addr = ''\t\t# å‘é€è´¦æˆ·\npassword = ''\t\t# æˆæƒç \nto_addr = ''\t\t# æ¥æ”¶è´¦æˆ·\nsmtp_server = ''\t# ä»£ç†å•†æœåŠ¡å™¨\n\nmsg = MIMEText('send by python.', 'plain', 'utf-8')\t# è®¾ç½®ä¿¡æ¯\nmsg['Subject'] = 'test_mail'\t\t# å¿…é¡»è®¾ç½®ï¼Œå¦åˆ™554é”™è¯¯\nmsg['from'] = 'xx@163.com'\nmsg['to'] = 'xx@qq.com'\n\nserver = smtplib.SMTP(smtp_server, 25)\t# è®¾ç½®serveræœåŠ¡å™¨\nserver.set_debuglevel(0)\t\t\t# debugä¸“ç”¨\nserver.login(user_addr, password)\t# ç™»å½•STMPæœåŠ¡å™¨\n# æˆè´¥åœ¨æ­¤ä¸€ä¸¾å•¦\nserver.sendmail(user_addr, [to_addr], msg.as_string())\nserver.quit()\t# é€€å‡º\n\n```\n\n- æ›´åŠ å®Œæ•´çš„é‚®ä»¶\n\n  ```python\n  from email import encoders\n  from email.header import Header\n  from email.mime.text import MIMEText\n  from email.utils import parseaddr, formataddr\n\n  def _format_addr(s):\t\t# æ ¼å¼åŒ–å‘é€äºº\n      name, addr = parseaddr(s)\n      return formataddr((Header(name, 'utf-8').encode(), addr))\n\n  msg = MIMEText('hello, send by Python...', 'plain', 'utf-8')\n  msg['From'] = _format_addr('Pythonçˆ±å¥½è€… <%s>' % from_addr)\n  msg['To'] = _format_addr('ç®¡ç†å‘˜ <%s>' % to_addr)\n  msg['Subject'] = Header('æ¥è‡ªSMTPçš„é—®å€™â€¦â€¦', 'utf-8').encode()\n  ```\n\n- æºå¸¦é™„ä»¶\n\n  ```python\n  from email.mime.text import MIMEText\n  from email.mime.base import MIMEBase\n  from email.mime.multipart import MIMEMultipart\n  from email import encoders\n\n  msg = MIMEMultipart()\n  msg.attach(MIMEText('send with file...', 'plain', 'utf-8'))\n\n  # æ·»åŠ é™„ä»¶å°±æ˜¯åŠ ä¸Šä¸€ä¸ªMIMEBaseï¼Œä»æœ¬åœ°è¯»å–ä¸€ä¸ªå›¾ç‰‡:\n  with open(\"E:\\My_Project\\å›¾åº“\\\\avatar.jpg\", 'rb') as f:\n      # è®¾ç½®é™„ä»¶çš„MIMEå’Œæ–‡ä»¶åï¼Œè¿™é‡Œæ˜¯pngç±»å‹:\n      mime = MIMEBase('image', 'jpg', filename='å¤´åƒ.png')\n      # åŠ ä¸Šå¿…è¦çš„å¤´ä¿¡æ¯:\n      mime.add_header('Content-Disposition', 'attachment', filename='å¤´åƒ.png')\n      mime.add_header('Content-ID', '<0>')\n      mime.add_header('X-Attachment-Id', '0')\n      # æŠŠé™„ä»¶çš„å†…å®¹è¯»è¿›æ¥:\n      mime.set_payload(f.read())\n      # ç”¨Base64ç¼–ç :\n      encoders.encode_base64(mime)\n      # æ·»åŠ åˆ°MIMEMultipart:\n      msg.attach(mime)\n\n  ```\n"}}]);